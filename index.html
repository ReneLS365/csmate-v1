<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Scafix v8.1 – Akkordregistrering</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="print.css" media="print" />
</head>
<body>
<header>
  <h1>Scafix v8.1</h1>
  <nav class="tabs">
    <button class="tab-btn active" data-tab="reg">Registrering</button>
    <button class="tab-btn" data-tab="mat">Materialer</button>
    <button class="tab-btn" data-tab="calc">Udregning</button>
  </nav>
</header>
<main>
  <!-- REGISTRERING -->
  <section id="tab-reg" class="tab-panel active">
    <div class="card">
      <h2>Projekt</h2>
      <div class="grid-2">
        <input id="projId" placeholder="Sagsnummer" />
        <input id="projNavn" placeholder="Projekt-/opgavenavn" />
      </div>
      <div class="grid-2">
        <input id="projAdresse" placeholder="Adresse" />
        <input id="projDato" type="date" />
      </div>
      <div class="grid-2">
        <input id="sjak" placeholder="Sjak" />
        <select id="delopgave">
          <option value="montage">Montage</option>
          <option value="demontage">Demontage</option>
          <option value="service">Service</option>
        </select>
      </div>
    </div>
    <div class="card">
      <h2>Montører</h2>
      <div id="workers"></div>
      <button id="btnAddWorker" class="secondary">+ Tilføj mand</button>
    </div>
  </section>

  <!-- MATERIALER -->
  <section id="tab-mat" class="tab-panel">
    <div class="card">
      <h2>Materialer</h2>
      <div class="grid-3">
        <input id="searchMaterialer" placeholder="Søg…" />
        <select id="systemFilter">
          <option value="ALL">Alle systemer</option>
          <option value="BOSTA">BOSTA</option>
          <option value="HAKI">HAKI</option>
          <option value="MODEX">MODEX</option>
        </select>
        <label class="switch"><input type="checkbox" id="toggleCounter" /> Tæller‑mode (+/−)</label>
      </div>
      <div id="materialsList" class="materialsList"></div>
    </div>
  </section>

  <!-- UDREGNING -->
  <section id="tab-calc" class="tab-panel">
    <div class="card">
      <h2>Job-tilvalg</h2>
      <div class="grid-3">
        <input id="km" type="number" step="1" min="0" placeholder="Kørte km" value="0" />
        <input id="kmSats" type="number" step="0.25" min="0" placeholder="Km-sats (kr/km)" value="3" />
        <input id="timeSats" type="number" step="1" min="0" placeholder="Timefaktor (kr/t)" value="300" />
      </div>
      <textarea id="notat" placeholder="Notat (vises på PDF)"></textarea>
    </div>
    <div class="card actions">
      <button id="btnBeregn" class="primary">Beregn og vis review</button>
      <button id="btnExportCSV" class="secondary">Eksportér én samlet CSV</button>
      <button id="btnExportPDF" class="primary">Generér PDF‑rapport</button>
    </div>
    <div class="card">
      <h2>Review</h2>
      <div id="review">Udfyld data og tryk “Beregn”.</div>
    </div>
  </section>
</main>

<div id="pdfPreview" style="display:none"></div>

<script src="dataset.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="main.js"></script>
<script>
  if ('serviceWorker' in navigator) navigator.serviceWorker.register('./service-worker.js');
</script>
</body>
</html>
